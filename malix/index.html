<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Chasse aux Malix!</title>
    <meta name="theme-color" content="#1f1252" />
    <meta name="description" content="Chasse aux Malix : le mini-jeu du Festibask'Impro. Collectionne les 26 Malix pendant le festival d'impro à Anglet. Pour les enfants, gratuit et sans inscription." />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://festibask-impro.fr/malix/" />
    <!-- OpenGraph -->
    <meta property="og:title" content="Chasse aux Malix – Mini-jeu Festibask'Impro" />
    <meta property="og:description" content="Collectionne les 26 Malix pendant le festival d'impro à Anglet. Mini-jeu pour enfants, gratuit et sans inscription." />
    <meta property="og:url" content="https://festibask-impro.fr/malix/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://festibask-impro.fr/assets/img/festibaskimpro-festival-impro-anglet-social.jpg" />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Chasse aux Malix – Mini-jeu Festibask'Impro" />
    <meta name="twitter:description" content="Collectionne les 26 Malix pendant le festival d'impro à Anglet. Pour les enfants, gratuit." />
    <meta name="twitter:image" content="https://festibask-impro.fr/assets/img/festibaskimpro-festival-impro-anglet-social.jpg" />
    <link rel="stylesheet" href="./assets/style.css" />
  </head>
  <body>
    <main class="app" id="app">
      <section class="screen screen-welcome hidden" id="screen-welcome" aria-label="Accueil Chasse aux Malix">
        <div class="welcome-brand" aria-hidden="true">
          <img
            class="welcome-doodles-top"
            src="../assets/img/long/doodles-top.avif"
            alt=""
            loading="eager"
            decoding="async"
          />
          <div class="welcome-logo-shell">
            <img
              class="welcome-festibask-logo"
              src="../assets/img/long/festibask-impro__logo_ss-baseline_fd-fonce-720w.avif"
              alt="Logo Festibask Impro"
              loading="eager"
              decoding="async"
            />
          </div>
        </div>
        <div class="welcome-card">
          <h1>Chasse aux Malix!</h1>
          <p>Scanne ce QR code avec ton telephone pour jouer.</p>
          <img class="welcome-qr" id="welcomeQr" alt="QR code vers Chasse aux Malix" />
          <a class="welcome-link" id="welcomeLink" href="#" target="_blank" rel="noopener noreferrer"></a>
          <div class="welcome-actions">
            <button class="chip" id="welcomeStartBtn" type="button">Demarrer</button>
          </div>
          <p class="welcome-note" id="welcomeNote"></p>
        </div>
      </section>

      <section class="screen screen-game" id="screen-game" aria-label="Jeu Malix">
        <div class="kawaii-decor" aria-hidden="true">
          <span class="sticker sticker-proscenium"></span>
          <span class="sticker sticker-curtain sticker-curtain-left"></span>
          <span class="sticker sticker-curtain sticker-curtain-right"></span>
          <span class="sticker sticker-stage"></span>
          <div class="sticker sticker-audience" id="audienceSeats" aria-hidden="true"></div>
          <span class="sticker sticker-spotlight sticker-spotlight-1"></span>
          <span class="sticker sticker-spotlight sticker-spotlight-2"></span>
          <span class="sticker sticker-spotlight sticker-spotlight-3"></span>
        </div>
        <header class="topbar">
          <h1 class="logo">Chasse aux Malix!</h1>
          <span class="cheat-badge hidden" id="cheatBadge">Mode cheat</span>
        </header>

        <div class="playzone" id="playzone" aria-live="polite">
          <p class="spawn-approach-hint hidden" id="spawnApproachHint" aria-live="polite">
            Un Malix va entrer en scène !
          </p>
        </div>
        <div class="capture-overlay hidden" id="captureOverlay" aria-live="polite"></div>
        <nav class="bottom-shortcuts" aria-label="Acces rapides">
          <button class="shortcut-btn" id="openMalidexBtn" type="button" aria-controls="screen-malidex" aria-expanded="false">
            <span class="shortcut-icon" aria-hidden="true"></span>
            <span class="shortcut-label">Malidex</span>
          </button>
        </nav>
        <button class="photo-fab" id="openPhotoModeBtn" type="button" aria-label="Ouvrir le mode photo">
          <span class="photo-fab-icon" aria-hidden="true"></span>
          <span class="photo-fab-flash" aria-hidden="true"></span>
        </button>
      </section>

      <section class="screen screen-malidex hidden" id="screen-malidex" aria-label="Collection Malidex">
        <div class="hud-handle" aria-hidden="true"></div>
        <header class="topbar">
          <h2 class="screen-title">
            Malidex
            <span class="title-counter" aria-live="polite">
              <span class="title-counter-value" id="malidexProgress">0</span>
              <span class="title-counter-track" aria-hidden="true">
                <span class="title-counter-fill" id="malidexProgressFill"></span>
              </span>
            </span>
          </h2>
          <button class="chip chip-ghost" id="closeMalidexBtn" type="button" aria-label="Fermer le Malidex">
            ✕
          </button>
        </header>
        <div class="malidex-tabs" role="tablist" aria-label="Malidex onglets">
          <button class="malidex-tab is-active" id="malidexTabMalixBtn" type="button" role="tab" aria-selected="true">Malix</button>
          <button class="malidex-tab" id="malidexTabAlbumBtn" type="button" role="tab" aria-selected="false">Album</button>
        </div>
        <section class="malidex-panel" id="malidexPanelMalix">
          <div class="malidex-grid" id="malidexGrid"></div>
        </section>
        <section class="malidex-panel hidden" id="malidexPanelAlbum">
          <div class="album-grid" id="albumGrid"></div>
        </section>
        <aside class="malidex-detail hidden" id="malidexDetail" aria-live="polite">
          <div class="detail-visual-wrap">
            <img class="detail-visual" id="detailVisual" alt="" />
          </div>
          <h3 class="detail-name" id="detailName"></h3>
          <p class="detail-rarity" id="detailRarity"></p>
          <p class="detail-captures" id="detailCaptures"></p>
          <div class="confirm-actions">
            <button class="chip" id="detailTradeBtn" type="button">Echanger</button>
          </div>
        </aside>

      </section>

      <section class="screen-photo hidden" id="screen-photo" aria-label="Mode photomaton Malix">
        <video class="photo-video" id="photoVideo" autoplay playsinline muted></video>
        <div class="photo-malix" id="photoMalix">
          <img id="photoMalixImg" alt="" />
        </div>
        <div class="photo-flash hidden" id="photoFlash"></div>
        <p class="photo-hint" id="photoHint">Cadre ton Malix et prends la photo</p>
        <div class="photo-controls">
          <button class="chip chip-ghost" id="closePhotoModeBtn" type="button" aria-label="Fermer le mode photo">✕</button>
          <span class="photo-album-target" id="photoAlbumTarget" aria-hidden="true">Chasse</span>
          <button class="photo-capture-btn" id="takePhotoBtn" type="button" aria-label="Prendre la photo">●</button>
        </div>
      </section>

      <section class="album-viewer hidden" id="albumViewer" aria-label="Photo Malix">
        <div class="album-viewer-card">
          <img id="albumViewerImg" alt="Photo Malix" />
          <div class="album-viewer-actions">
            <button class="chip chip-ghost" id="shareAlbumPhotoBtn" type="button" disabled>Partager</button>
          </div>
        </div>
      </section>

      <section class="confirm-overlay hidden" id="resetConfirmOverlay" aria-label="Confirmation de reinitialisation">
        <div class="confirm-card" role="dialog" aria-modal="true" aria-labelledby="resetDialogTitle">
          <h3 id="resetDialogTitle">Reinitialiser ta collection ?</h3>
          <p>Tes Malix captures seront effaces sur cet appareil.</p>
          <div class="confirm-actions">
            <button class="chip chip-ghost" id="cancelResetBtn" type="button">Annuler</button>
            <button class="chip chip-warn" id="confirmResetBtn" type="button">Oui, effacer</button>
          </div>
        </div>
      </section>

      <section class="confirm-overlay hidden" id="deletePhotoConfirmOverlay" aria-label="Confirmation de suppression de photo">
        <div class="confirm-card" role="dialog" aria-modal="true" aria-labelledby="deletePhotoDialogTitle">
          <h3 id="deletePhotoDialogTitle">Supprimer cette photo ?</h3>
          <p>Cette action est definitive sur cet appareil.</p>
          <div class="confirm-actions">
            <button class="chip chip-ghost" id="cancelDeletePhotoBtn" type="button">Annuler</button>
            <button class="chip chip-warn" id="confirmDeletePhotoBtn" type="button">Oui, supprimer</button>
          </div>
        </div>
      </section>

      <section class="confirm-overlay hidden" id="tradeOverlay" aria-label="Echange de Malix">
        <div class="confirm-card trade-card" role="dialog" aria-modal="true" aria-labelledby="tradeDialogTitle">
          <button class="chip chip-ghost trade-close-btn" id="tradeCancelBtn" type="button" aria-label="Fermer">✕</button>
          <h3 id="tradeDialogTitle">Echange de Malix</h3>
          <div class="trade-step" id="tradeStepDecision">
            <p class="trade-help" id="tradeHelpText">Tape sur ton Malix lorsque tu es pret a echanger.</p>
            <p class="trade-countdown" id="tradeCountdown" aria-live="polite"></p>
            <div class="trade-confirm-zone">
              <button class="trade-malix-card" id="tradeMyConfirmBtn" type="button">
                <span class="trade-malix-flip" id="tradeMyFlip">
                  <span class="trade-malix-face trade-malix-front">
                    <img id="tradeMyConfirmImg" alt="" />
                    <span id="tradeMyConfirmLabel">Ton Malix</span>
                  </span>
                  <span class="trade-malix-face trade-malix-back">
                    <img class="trade-qr" id="tradeMyQr" alt="Ton QR d'echange" />
                    <span class="trade-code-inline" id="tradeMyCode">---</span>
                  </span>
                </span>
              </button>
              <button class="trade-malix-card trade-malix-peer" id="tradePeerConfirmBtn" type="button">
                <img id="tradePeerConfirmImg" alt="" />
                <span id="tradePeerConfirmLabel">Malix du joueur 2</span>
              </button>
            </div>
            <div class="trade-success hidden" id="tradeSuccessPanel">
              <p id="tradeSuccessText">Echange reussi !</p>
              <button class="chip" id="tradeDoneBtn" type="button">Fermer</button>
            </div>
          </div>
        </div>
      </section>

      <section class="confirm-overlay hidden" id="tradeScannerOverlay" aria-label="Scanner QR echange">
        <div class="confirm-card trade-scanner-card">
          <h3>Scan du QR</h3>
          <video id="tradeScannerVideo" autoplay playsinline muted></video>
          <div class="confirm-actions">
            <button class="chip chip-ghost" id="tradeScannerCancelBtn" type="button">Fermer</button>
          </div>
        </div>
      </section>

      <section class="screen screen-finish hidden" id="screen-finish" aria-label="Fin du jeu">
        <div class="finish-content">
          <h2 class="bravo">Bravo !</h2>
          <p>Tu as tout collecté ! Va chercher ton cadeau au stand du festival.</p>
          <div class="finale-zone" id="finaleZone" aria-hidden="true"></div>
          <p class="finish-hint">Tape n'importe où pour ranger ta collection dans le Malidex</p>
          <div class="finish-target" id="finishMalidexTarget" aria-hidden="true">Malidex</div>
        </div>
      </section>

      <section class="screen-landscape hidden" id="landscapeGuard" aria-label="Orientation paysage non supportée">
        <div class="landscape-card">
          <div class="landscape-illustration" aria-hidden="true">
            <span class="phone"></span>
            <span class="arrow">↺</span>
            <span class="mini-malix"></span>
          </div>
          <p>Tourne ton téléphone pour jouer</p>
        </div>
      </section>

      <section class="access-gate hidden" id="accessGate" aria-label="Acces au jeu">
        <div class="access-gate-card">
          <h2>La chasse est fermee!</h2>
          <p class="access-gate-message" id="accessGateMessage">Le jeu est uniquement disponible pendant le festival</p>
          <p class="access-gate-detail hidden" id="accessGateDetail"></p>
          <p class="access-gate-rdv">
            Rendez-vous
            <span id="accessGateRdvTime">entre le 15 et le 17 mai 2026</span>
            a
            <span id="accessGateRdvGeo">la Patinoire de la Barre a Anglet</span>.
          </p>
          <div class="access-gate-actions">
            <button class="chip" id="accessGateRetryBtn" type="button">Reessayer</button>
            <button class="chip chip-ghost hidden" id="accessGateIgnoreBtn" type="button">Ignorer</button>
          </div>
          <img
            class="access-gate-logo"
            src="../assets/img/logos/festibask-impro__logo_ss-baseline_fd-fonce-400.avif"
            alt="Logo Festibask Impro"
            loading="eager"
            decoding="async"
          />
          <p class="access-gate-infos">
            Infos : <a href="https://festibask-impro.fr" target="_blank" rel="noopener noreferrer">festibask-impro.fr</a>
          </p>
        </div>
      </section>
    </main>

    <script src="./assets/collection-state.js"></script>
    <script src="./assets/access-config.js"></script>
    <script src="./assets/access-gate.js"></script>
    <script src="./assets/trade-session.js"></script>
    <script src="./assets/app.js"></script>
  </body>
</html>
